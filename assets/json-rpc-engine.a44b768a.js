import{c as e}from"./react.49c1050d.js";import{s as r}from"./@metamask.36686bb8.js";import{d as t}from"./eth-rpc-errors.66fe6329.js";var n={},o={},i={};Object.defineProperty(i,"__esModule",{value:!0}),i.getUniqueId=void 0;let a=Math.floor(4294967295*Math.random());i.getUniqueId=function(){return a=(a+1)%4294967295,a},Object.defineProperty(o,"__esModule",{value:!0}),o.createIdRemapMiddleware=void 0;const s=i;o.createIdRemapMiddleware=function(){return(e,r,t,n)=>{const o=e.id,i=s.getUniqueId();e.id=i,r.id=i,t((t=>{e.id=o,r.id=o,t()}))}};var c={};Object.defineProperty(c,"__esModule",{value:!0}),c.createAsyncMiddleware=void 0,c.createAsyncMiddleware=function(e){return async(r,t,n,o)=>{let i;const a=new Promise((e=>{i=e}));let s=null,c=!1;const d=async()=>{c=!0,n((e=>{s=e,i()})),await a};try{await e(r,t,d),c?(await a,s(null)):o(null)}catch(u){s?s(u):o(u)}}};var d={};Object.defineProperty(d,"__esModule",{value:!0}),d.createScaffoldMiddleware=void 0,d.createScaffoldMiddleware=function(e){return(r,t,n,o)=>{const i=e[r.method];return void 0===i?n():"function"==typeof i?i(r,t,n,o):(t.result=i,o())}};var u={},l=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(u,"__esModule",{value:!0}),u.JsonRpcEngine=void 0;const p=l(r),f=t;class h extends p.default{constructor(){super(),this._middleware=[]}push(e){this._middleware.push(e)}handle(e,r){if(r&&"function"!=typeof r)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?r?this._handleBatch(e,r):this._handleBatch(e):r?this._handle(e,r):this._promiseHandle(e)}asMiddleware(){return async(e,r,t,n)=>{try{const[o,i,a]=await h._runAllMiddleware(e,r,this._middleware);return i?(await h._runReturnHandlers(a),n(o)):t((async e=>{try{await h._runReturnHandlers(a)}catch(r){return e(r)}return e()}))}catch(o){return n(o)}}}async _handleBatch(e,r){try{const t=await Promise.all(e.map(this._promiseHandle.bind(this)));return r?r(null,t):t}catch(t){if(r)return r(t);throw t}}_promiseHandle(e){return new Promise((r=>{this._handle(e,((e,t)=>{r(t)}))}))}async _handle(e,r){if(!e||Array.isArray(e)||"object"!=typeof e){const t=new f.EthereumRpcError(f.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return r(t,{id:void 0,jsonrpc:"2.0",error:t})}if("string"!=typeof e.method){const t=new f.EthereumRpcError(f.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return r(t,{id:e.id,jsonrpc:"2.0",error:t})}const t=Object.assign({},e),n={id:t.id,jsonrpc:t.jsonrpc};let o=null;try{await this._processRequest(t,n)}catch(i){o=i}return o&&(delete n.result,n.error||(n.error=f.serializeError(o))),r(o,n)}async _processRequest(e,r){const[t,n,o]=await h._runAllMiddleware(e,r,this._middleware);if(h._checkForCompletion(e,r,n),await h._runReturnHandlers(o),t)throw t}static async _runAllMiddleware(e,r,t){const n=[];let o=null,i=!1;for(const a of t)if([o,i]=await h._runMiddleware(e,r,a,n),i)break;return[o,i,n.reverse()]}static _runMiddleware(e,r,t,n){return new Promise((o=>{const i=e=>{const t=e||r.error;t&&(r.error=f.serializeError(t)),o([t,!0])},a=t=>{r.error?i(r.error):(t&&("function"!=typeof t&&i(new f.EthereumRpcError(f.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof t}" for request:\n${w(e)}`,{request:e})),n.push(t)),o([null,!1]))};try{t(e,r,a,i)}catch(s){i(s)}}))}static async _runReturnHandlers(e){for(const r of e)await new Promise(((e,t)=>{r((r=>r?t(r):e()))}))}static _checkForCompletion(e,r,t){if(!("result"in r)&&!("error"in r))throw new f.EthereumRpcError(f.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:\n${w(e)}`,{request:e});if(!t)throw new f.EthereumRpcError(f.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:\n${w(e)}`,{request:e})}}function w(e){return JSON.stringify(e,null,2)}u.JsonRpcEngine=h;var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.mergeMiddleware=void 0;const m=u;var y,v,M;_.mergeMiddleware=function(e){const r=new m.JsonRpcEngine;return e.forEach((e=>r.push(e))),r.asMiddleware()},y=n,v=e&&e.__createBinding||(Object.create?function(e,r,t,n){void 0===n&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,n){void 0===n&&(n=t),e[n]=r[t]}),M=e&&e.__exportStar||function(e,r){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(r,t)||v(r,e,t)},Object.defineProperty(y,"__esModule",{value:!0}),M(o,y),M(c,y),M(d,y),M(i,y),M(u,y),M(_,y);export{n as d};
